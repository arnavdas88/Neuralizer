<!DOCTYPE html>
<html lang="en">
<head>
    <title>Neuralizer</title>

    <meta name=viewport content="width=device-width, initial-scale=1">
    <meta name="description" content="
        Neuralizer.ai - visual neural network designer.
        Neuralizer makes building neural network topologies intuitive and accessible by using a flow-graph graphical user interface.
        It allows building complex structures without writing any code, and then exporting them into multiple machine learning frameworks.
        Neuralizer supports the following frameworks - TensorFlow, Keras, Caffe, Torch and PyTorch.
        It also allows collaboration and sharing of models, which can be later used as sub-modules in more advanced structures.
    ">
    <meta charset="UTF-8">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

    <!-- bootstrap -->
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <!-- bootstrap select -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.12.2/css/bootstrap-select.min.css" media="none" onload="if(media!='all')media='all'">
    <!--Pulling Awesome Font -->
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet" media="none" onload="if(media!='all')media='all'">
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Lato:100,700" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!-- Styles -->
    <link href="css/style.min.css?random=@Environment.TickCount" rel="stylesheet">
    <!--<link rel="stylesheet" type="text/css" href="css/gitgraph.css" />-->
    <!-- Animate -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.2/animate.min.css">
    <!--jQuery-->
    <script src="https://code.jquery.com/jquery-3.1.1.min.js" integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8=" crossorigin="anonymous"></script>

    <!-- Masonry -->
    <script src="https://unpkg.com/masonry-layout@4.1/dist/masonry.pkgd.min.js" async></script>
    <script src="https://npmcdn.com/imagesloaded@4.1/imagesloaded.pkgd.min.js"></script>

    <!-- Neuralizer Scripts -->
    <script src="js/utils.js"></script>
    <script src="js/shapes.js"></script>
    <script src="js/objects.js"></script>
    <script src="js/nn.js"></script>
    <script src="js/transforms.js"></script>
    <script src="js/files.js"></script>
    <script src="js/server_communication.js"></script>
    <script src="js/canvas_manager.js"></script>
    <script src="js/side_bar_manager.js"></script>
    <!--<script src="js/scripts.min.js?random=@Environment.TickCount"></script>-->

    <!-- favicon -->
    <link rel="icon" type="image/png" sizes="32x32" href="images/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="images/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="images/favicon-16x16.png">

    <!-- MathJax -->
    <!--<script type='text/javascript' src='http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_SVG'></script>-->
    <!--<script type="text/x-mathjax-config">-->
    <!--MathJax.Hub.Config({-->
      <!--tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]},-->
      <!--displayAlign: "left",-->
      <!--displayIndent: "2em",-->
      <!--SVG: { scale: 120 }-->
    <!--});-->
    <!--</script>-->

    <!---->

    <script type="text/javascript">
        // redirect mobile devices to unsupported page
        if (screen.width <= 699) {
            document.location = "http://neuralizer.ai/unsupported.html";
        }
        if (
            (navigator.userAgent.match(/iPhone/i)) || (navigator.userAgent.match(/iPod/i))) {
            location.replace("http://neuralizer.ai/unsupported.html");
        }
    </script>

    <script type="text/javascript">

        var canvas_manager;
        var sidebar_manager;

        function send_email() {
            var body = JSON.stringify(canvas_manager.stored_states[canvas_manager.current_timestep]);
            var subject = "Neuralizer Topology";
            window.open('mailto:'  + '?subject=' +subject + '&body=' + body);
        }

        function post_to_twitter() {
            var link="http://neuralizer.ai";
            window.open('https://twitter.com/intent/tweet?text=See my latest model at Neuralizer.ai: ' + link);
        }

        function change_color(color_idx) {
            canvas_manager.change_selected_shapes_color(color_idx);
            sidebar_manager.change_selected_color(color_idx);
        }

        function create_new_layer() {
            var layerType = $("#layerType").val();
            var layer;
            if (layerType == "DataPlaceholder") {
                layer = new DataPlaceholder(
                    $("#DataPlaceholderWidth").val(),
                    $("#DataPlaceholderHeight").val(),
                    $("#DataPlaceholderDepth").val());
            } else if (layerType == "Convolution") {
                layer = new Convolution(
                    $("#ConvolutionNumberOfOFMs").val(),
                    $("#ConvolutionKernelPropertiesWidth").val(),
                    $("#ConvolutionKernelPropertiesHeight").val(),
                    $("#ConvolutionKernelPropertiesStride").val(),
                    $("#ConvolutionKernelPropertiesStride").val(),
                    $("#ConvolutionKernelPropertiesPadding").val(),
                    $("#ConvolutionKernelPropertiesPadding").val());
            } else if (layerType == "Pooling") {

                var poolingType = $("#PoolingType").val();
                if (poolingType == "MaxPooling") {
                    layer = new MaxPooling(
                        $("#PoolingWindowPropertiesWidth").val(),
                        $("#PoolingWindowPropertiesHeight").val(),
                        $("#PoolingWindowPropertiesStride").val(),
                        $("#PoolingWindowPropertiesStride").val(),
                        $("#PoolingWindowPropertiesPadding").val(),
                        $("#PoolingWindowPropertiesPadding").val(),
                        $("#PoolingType").val());
                } else if (poolingType == "AveragePooling") {
                    layer = new AveragePooling(
                        $("#PoolingWindowPropertiesWidth").val(),
                        $("#PoolingWindowPropertiesHeight").val(),
                        $("#PoolingWindowPropertiesStride").val(),
                        $("#PoolingWindowPropertiesStride").val(),
                        $("#PoolingWindowPropertiesPadding").val(),
                        $("#PoolingWindowPropertiesPadding").val(),
                        $("#PoolingType").val());
                } else if (poolingType == "StochasticPooling") {
                    layer = new StochasticPooling(
                        $("#PoolingWindowPropertiesWidth").val(),
                        $("#PoolingWindowPropertiesHeight").val(),
                        $("#PoolingWindowPropertiesStride").val(),
                        $("#PoolingWindowPropertiesStride").val(),
                        $("#PoolingWindowPropertiesPadding").val(),
                        $("#PoolingWindowPropertiesPadding").val(),
                        $("#PoolingType").val());
                }

            } else if (layerType == "InnerProduct") {
                layer = new InnerProduct(
                    $("#InnerProductOutputSize").val());
            } else if (layerType == "Deconvolution") {
                layer = new Deconvolution(
                    $("#DeconvolutionNumberOfOFMs").val(),
                    $("#DeconvolutionKernelPropertiesWidth").val(),
                    $("#DeconvolutionKernelPropertiesHeight").val(),
                    $("#DeconvolutionKernelPropertiesStride").val(),
                    $("#DeconvolutionKernelPropertiesStride").val(),
                    $("#DeconvolutionKernelPropertiesPadding").val(),
                    $("#DeconvolutionKernelPropertiesPadding").val());
            } else if (layerType == "Activation") {
                var activationType = $("#ActivationType").val();
                if (activationType == "ReLU") {
                    layer = new ReLU();
                } else if (activationType == "ELU") {
                    layer = new ELU();
                } else if (activationType == "Sigmoid") {
                    layer = new Sigmoid();
                } else if (activationType == "HardSigmoid") {
                    layer = new HardSigmoid();
                } else if (activationType == "TanH") {
                    layer = new TanH();
                }
            } else if (layerType == "Regularization") {
                var regularizationType = $("#RegularizationType").val();
                if (regularizationType == "Dropout") {
                    layer = new Dropout($("#RegularizationDropoutKeepProbability").val());
                } else if (regularizationType == "Maxout") {
                    layer = new Maxout();
                } else if (regularizationType == "DropConnect") {
                    layer = new DropConnect();
                } else if (regularizationType == "Zoneout") {
                    layer = new Zoneout();
                }
            } else if (layerType == "DataManipulation") {
                var reshapeType = $("#DataManipulationType").val();
                if (reshapeType == "Concatenate") {
                    layer = new Concatenate();
                } else if (reshapeType == "Reshape") {
                    layer = new Reshape();
                } else if (reshapeType == "Flatten") {
                    layer = new Flatten();
                } else if (reshapeType == "Permute") {
                    layer = new Permute();
                } else if (reshapeType == "Repeat") {
                    layer = new Repeat();
                }
            } else if (layerType == "Normalization") {
                var normalizationType = $("#NormalizationType").val();
                if (normalizationType == "LocalResponseNormalization") {
                    layer = new LRN(
                        $("#NormalizationLocalResponseNormalizationNumberOfNeighbours").val(),
                        $("#K").val(),
                        $("#Alpha").val(),
                        $("#Beta").val());
                } else if (normalizationType == "BatchNormalization") {
                    layer = new BatchNormalization();
                } else if (normalizationType == "L2Normalization") {
                    layer = new L2Normalization();
                }
            } else if (layerType == "ElementWise") {
                var elementWiseOperator = $("#ElementWiseType").val();
                if (elementWiseOperator == "Add") {
                    layer = new Add();
                } else if (elementWiseOperator == "Multiply") {
                    layer = new Multiply();
                }
            } else if (layerType == "Stochastic") {

            } else if (layerType == "Recurrent") {

            } else {
                layer = new Layer();
            }
            return layer;
        }

        function get_short_name(layer_type) {
            // get a short default name for a layer
            for (var layer_type_group in layer_types) {
                var group = layer_types[layer_type_group];
                for (key in group) {
                    key_fixed = key.replace(/ /g, '');
                    if (layer_type == key_fixed) {
                        return group[key]["short_name"];
                    }
                }
            }
            return "";
        }


        function update_shape_name() {
            canvas_manager.get_primary_selected_shape().update_text($("#layerName").val());
            canvas_manager.draw_required = true;
            canvas_manager.draw_curr_state_if_necessary();
        }


        function add_layer() {
            canvas_manager.reset_selected_shapes();
            canvas_manager.mouse_is_pressed = true;

            var layer_type = $("#layerType").val();
            var layer_name = $("#layerName").val();
            if (layer_name == "") {
                layer_name = get_short_name(layer_type);
                $("#layerName").val(layer_name);
            }

            var x = canvas_manager.cursor_x;
            var y = canvas_manager.cursor_y;
            var color = canvas_manager.selected_color_idx;
            var shape;
            if (layer_type == "DataPlaceholder") {
                shape = new Rectangle(x, y, 80, 40, 6, 10, 3, layer_name, fill_colors[color], border_colors[color], false);
            } else if (layer_type == "Activation") {
                shape = new Diamond(x, y, 40, 40, 2, 3, layer_name, fill_colors[color], border_colors[color]);
            } else if (layer_type == "DataManipulation") {
                shape = new Triangle(x, y, 40, 40, 5, 3, layer_name, fill_colors[color], border_colors[color]);
            } else if (layer_type == "ElementWise") {
                shape = new Ellipse(x, y, 40, 40, 3, layer_name, fill_colors[color], border_colors[color]);
            } else if (layer_type == "Pooling") {
                shape = new Hexagon(x, y, 80, 40, 2, 3, layer_name, fill_colors[color], border_colors[color]);
            } else if (layer_type == "Augmentation") {
                shape = new Step(x, y, 80, 40, 2, 10, 3, layer_name, fill_colors[color], border_colors[color]);
//            } else if (layer_type == "Normalization") {
//                shape = new HalfCircle(x, y, 40, 40, 3, layer_name, fill_colors[color], border_colors[color]);
            } else if (layer_type == "Convolution") {
                shape = new Trapezoid(x, y, 80, 40, 6, 15, 3, layer_name, fill_colors[color], border_colors[color], false);
            } else {
                shape = new Rectangle(x, y, 80, 40, 6, 0, 3, layer_name, fill_colors[color], border_colors[color], false);
            }
            shape.set_layer(create_new_layer());
            canvas_manager.add_shape(shape);

            sidebar_manager.show_remove_layer_button();
        }


        function remove_layer() {
            canvas_manager.remove_selected_shapes();
            sidebar_manager.hide_remove_layer_button();
        }



        function run() {

            // Animate loader off screen
            $(".preloader").fadeOut("slow");

            canvas_manager = new CanvasManager(document.getElementById('cnv'));
            sidebar_manager = new SidebarManager();


            function doubleClick(evt) {
//                var intervalId = setInterval(function() { canvas_manager.rotate_selected_shape() },30);
//                canvas_manager.animationIntervalId = intervalId;
            }

            function mouseDown(evt) {
                canvas_manager.hide_selection_box();
                canvas_manager.update_cursor_state(evt.clientX, evt.clientY, evt.button, true);

                if (canvas_manager.shape_with_content_pointed_by_cursor) {
                    if (!canvas_manager.shape_is_selected(canvas_manager.shape_with_content_pointed_by_cursor)) {
                        // select the currently pointed shape if it not already selected
                        canvas_manager.select_shape(canvas_manager.shape_with_content_pointed_by_cursor);
                    }
                } else if (canvas_manager.pressed_mouse_button == "left") {
                    // add points to curr arrow or attach / detach an arrow
                    canvas_manager.extend_current_arrow();
                    canvas_manager.reset_selected_shapes();
                }

                if (evt.button == 2) {
                    canvas_manager.copy_from_clipboard();
                    canvas_manager.paste_from_clipboard();
                }

                // sidebar add/remove button toggle
                if (canvas_manager.selected_shapes.length == 0) {
                    canvas_manager.initialize_selection_box();
                    sidebar_manager.hide_remove_layer_button();
                } else {
                    sidebar_manager.show_remove_layer_button();
                }

                // update side bar properties
                var selected_shape = canvas_manager.get_primary_selected_shape();
                if (selected_shape) {
                    sidebar_manager.set_layer_name(selected_shape.text);
                    sidebar_manager.set_layer_params(selected_shape.layer);
                    sidebar_manager.change_selected_color(canvas_manager.get_shape_color_idx(selected_shape));
                    sidebar_manager.set_full_details_switch(selected_shape.full_details);
                } else {
                    sidebar_manager.set_layer_name("");
                }
                sidebar_manager.focus_layer_name();

                // draw
                canvas_manager.draw_curr_state_if_necessary();
            }


            function mouseMove(evt) {
                $('body').css('cursor', 'default');
                canvas_manager.update_cursor_state(evt.clientX, evt.clientY, evt.button);

                if (canvas_manager.mouse_is_pressed && canvas_manager.current_arrow.points == 0) {
                    if (!canvas_manager.get_primary_selected_shape() || canvas_manager.selection_box_is_active()) {
                        canvas_manager.set_selection_box();
                        if (canvas_manager.get_primary_selected_shape()) {
                            sidebar_manager.show_remove_layer_button();
                        }
                    }
                }

                if (canvas_manager.shape_with_content_pointed_by_cursor) {
                    $('body').css('cursor', 'move');
                } else if (canvas_manager.get_object_with_pointed_border()) {
                    $('body').css('cursor', 'pointer');
                }

                canvas_manager.highlight_selected_shapes();

                if (canvas_manager.mouse_is_pressed && canvas_manager.pressed_mouse_button == "left" && !canvas_manager.selection_box_is_active()) {
                    canvas_manager.move_selected_shapes();
                } else if (canvas_manager.pressed_mouse_button == "middle") {
                    canvas_manager.translate_canvas(canvas_manager.cursor_diff_x, canvas_manager.cursor_diff_y);
                }

                if (canvas_manager.current_arrow.vertices.length > 0) {
                    canvas_manager.current_arrow.add_point(new Vertex(canvas_manager.cursor_x, canvas_manager.cursor_y, 0));
                }

                canvas_manager.draw_curr_state_if_necessary();
            }

            function mouseUp(evt) {
                canvas_manager.hide_selection_box();

                canvas_manager.update_cursor_state(evt.clientX, evt.clientY, evt.button, false);

                // just for moving all lines to the correct place
                canvas_manager.move_shapes(canvas_manager.shapes, 0, 0);

                canvas_manager.save_state();
            }

            function mouseWheel(evt) {
                canvas_manager.update_cursor_state(evt.clientX, evt.clientY, evt.button, false);
                var change = 0.1;
                var delta = 1+Math.max(-1, Math.min(1, (evt.wheelDelta || -evt.detail)))*change;

                canvas_manager.zoom_canvas(delta);

                canvas_manager.draw_required = true;
                canvas_manager.draw_curr_state_if_necessary();
            }

            function keyPress(evt) {
                evt = evt || window.event;
                if (evt.keyCode == 46) {
                    // Del ==> Remove selected layers
                    if ($("#removeLayerIcon").hasClass('rotated')) {
                        canvas_manager.remove_selected_shapes();
                        sidebar_manager.hide_remove_layer_button();
                        canvas_manager.draw_required = true;
                    }
                } else if (evt.ctrlKey && evt.keyCode == 65) {
                    // Ctrl + A ==> Select all
                    canvas_manager.select_all_shapes();
                    sidebar_manager.show_remove_layer_button();
                    var selected_shape = canvas_manager.get_primary_selected_shape();
                    if (selected_shape) {
                        sidebar_manager.set_layer_name(selected_shape.text);
                    }
//                    evt.preventDefault();
//                    evt.stopPropagation();
                } else if (evt.ctrlKey && evt.keyCode == 67) {
                    // Ctrl + C ==> Copy
                    canvas_manager.show_message("Copied to clipboard");
                    canvas_manager.copy_from_clipboard();
                    $("#layerName").blur();
                } else if (evt.ctrlKey && evt.keyCode == 86) {
                    // Ctrl + V ==> Paste
                    canvas_manager.paste_from_clipboard();
                } else if (evt.ctrlKey && evt.keyCode == 90 && !evt.shiftKey) {
                    // Ctrl + Z ==> undo
                    if (canvas_manager.undo()) {
                        canvas_manager.show_message("Undo changes");
                    }
                } else if ((evt.ctrlKey && evt.keyCode == 89) || (evt.ctrlKey && evt.shiftKey && evt.keyCode == 90)) {
                    // Ctrl + Y ==> redo
                    if (canvas_manager.redo()) {
                        canvas_manager.show_message("Redo changes");
                        canvas_manager.highlight_selected_shapes();
                    }
                } else if (evt.keyCode == 27) {
                    // Escape ==> Cancel current action
                    canvas_manager.reset_current_arrow();
                } else if (evt.keyCode == 8) {
                    // Backspace ==> Cancel last arrow point
                    if (canvas_manager.current_arrow.points > 0) {
                        canvas_manager.current_arrow.vertices.pop();
                        canvas_manager.current_arrow.points--;
                        canvas_manager.draw_required = true;
                    }
                } else if (evt.ctrlKey && evt.keyCode == 88) {
                    // Ctrl + X ==> Printing graph test
                    console.log(canvas_manager.to_graph());
                } else if (evt.keyCode == 38) {
                    // Ctrl + X ==> Printing graph test
                    console.log(canvas_manager.to_graph());
                }
                canvas_manager.draw_curr_state_if_necessary();
            }


            // event listeners
            canvas_manager.canvas.addEventListener('mousedown', mouseDown);
            canvas_manager.canvas.addEventListener("dblclick", doubleClick);
            document.addEventListener('mousemove', mouseMove);
            document.addEventListener('mouseup', mouseUp);
            document.addEventListener('mousewheel', mouseWheel);
            document.addEventListener('keydown', keyPress);
            window.addEventListener('resize', function() { canvas_manager.fix_canvas_size(document.getElementById('cnv')) });
            var fileInput = document.getElementById('fileInput');
            fileInput.addEventListener('change', load_state_from_file);

            sidebar_manager.create_layers_factory($("#ParamsContainer"));
            sidebar_manager.create_layers_selector($("#LayersSelector"));
            sidebar_manager.select_layer_type();


            // check if there is already an open session
            jQuery.get('/loggedin',{}, function(user){
                if (user != '0') {
                    $("#username").val(user.username);
                    sidebar_manager.logged_in_mode();
                }
            });


        }
    </script>
</head>
<body onload="run()" style="overflow: hidden;" oncontextmenu="return false">
<div class="preloader stretched"></div>
<!-- Github Form Me Ribbon -->
<a href="https://github.com/itaicaspi/Neuralizer">
    <img class="non-selectable" style="z-index: 10; position: absolute; top: 0; right: 0; border: 0;" src="https://camo.githubusercontent.com/365986a132ccd6a44c23a9169022c0b5c890c387/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f7265645f6161303030302e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png">
</a>
<!--------------------------->
<span class="main">
    <div class="col-xs-1 collapse icons-side-bar animated" id="sidebar_icons_container">
        <div class="wrapping-side-icon" style="height: 100px;">
            <div id="before_icon" class="side-icon before-side-icon" style="height: 100px; cursor: default">
            </div>
        </div>
        <!-- Designer -->
        <div>
            <div id="designer_icon" class="side-icon selected-side-icon" onclick="sidebar_manager.switch_sidebar_mode('designer')">
                <i data-toggle="tooltip" data-placement="top" title="Designer" class="material-icons">color_lens</i>
            </div>
        </div>
        <!-- Share / Explore -->
        <div class="wrapping-side-icon">
            <div id="share_explore_icon" class="side-icon after-side-icon" onclick="sidebar_manager.switch_sidebar_mode('share_explore')">
                <i data-toggle="tooltip" data-placement="top" title="Share/Explore" class="material-icons">explore</i>
            </div>
        </div>
        <!-- Account -->
        <div>
            <div id="account_icon" class="side-icon" onclick="sidebar_manager.switch_sidebar_mode('account')">
                <i data-toggle="tooltip" data-placement="top" title="Account" class="material-icons">account_circle</i>
            </div>
        </div>
        <div style="height: 100px;">
            <div id="after_icon" class="side-icon" style="height:100px; cursor: default">
            </div>
        </div>
    </div>
    <div class="col-xs-2 side-bar animated collapse" id="sidebar_container">
        <div class="appName animated fadeInUp">
            <!--<h1 class="title">neuralizer</h1>-->
            <img src="images/neuralizer-logo-green-slim.png" class="logo" style="width: 90%;">
            <b class="title-subscript">visual neural network designer</b>
        </div>
        <br>
        <div id="designer">
            <div class="form-group">
                <label for="filename">Topology Name</label>
                <input type="text" id="filename" class="form-control" placeholder="Topology Name">
            </div>
            <hr class="separator">
            <div class="form-group">
                <label for="layerName" style="color:white">Layer Name</label>
                <input type="text" id="layerName" class="form-control" placeholder="Layer name" onkeyup="update_shape_name()">
            </div>
            <div class="form-group" id="LayersSelector"></div>
            <hr class="separator">
            <div id="ParamsContainer"></div>

            <div class="form-group">
                <label for="layerColor">Color</label>
                <div style="width:100%;cursor:pointer;" id="layerColor">
                    <div class="layer-color" id="color0" onclick="change_color(0)"
                         style="background-color: rgb(142, 68, 173); border-top-left-radius: 3px;border-bottom-left-radius: 3px; ">
                        <i class="fa fa-check" aria-hidden="true" style="margin-top: 5px;margin-left:35%;color:rgba(255,255,255,0.7)"></i>
                    </div>
                    <div class="layer-color" id="color1" onclick="change_color(1)"
                         style="background-color: rgb(52, 152, 219); ">
                    </div>
                    <div class="layer-color" id="color2" onclick="change_color(2)"
                         style="background-color: rgb(39, 174, 96); ">
                    </div>
                    <div class="layer-color" id="color3" onclick="change_color(3)"
                         style="background-color: rgb(241, 196, 15);">
                    </div>
                    <div class="layer-color" id="color4" onclick="change_color(4)"
                         style="background-color: rgb(230, 126, 34);">
                    </div>
                    <div class="layer-color" id="color5" onclick="change_color(5)"
                         style="background-color: rgb(231, 76, 60);border-top-right-radius: 3px;border-bottom-right-radius: 3px; border-style: none solid solid none;">
                    </div>
                </div>
            </div>
            <br>
            <div class="form-group">
                <span style="padding-right: 5px; color:white"><b>Full Details</b></span>
                <div class="material-switch pull-right">
                    <input id="fullDetails" name="latexName" type="checkbox" onchange="canvas_manager.show_full_details(this.checked)"/>
                    <label for="fullDetails" class="label-success"></label>
                </div>
            </div>
            <div class="form-group" style="text-align:center; height: 40px">
                <button type="button" id="addLayer" class="btn btn-default btn-circle btn-lg fast-transition" onclick="add_layer()" style="z-index: 100">
                    <i data-toggle="tooltip" data-placement="top" title="Add" id="addLayerIcon" class="fa fa-plus plus-icon-shift-fix fast-transition" aria-hidden="true"></i>
                </button>
                <button type="button" id="removeLayer" class="btn invisible-btn btn-default btn-circle btn-lg fast-transition" onclick="remove_layer()" style="z-index: 0">
                    <i data-toggle="tooltip" data-placement="top" title="Remove" id="removeLayerIcon" class="fa fa-plus plus-icon-shift-fix fast-transition" aria-hidden="true"></i>
                </button>
            </div>
            <hr class="separator">
        </div>

        <!--<div id="import_export" style="display: none">-->

        <!--</div>-->
        <div id="share_explore" class="collapse">

            <div class="form-group">
                <label>Sharing Options</label>
            </div>
            <div class="row" style="margin-bottom: 20px">
                <div class="col-lg-12" style="text-align: center">
                    <ul class="social-network social-circle">
                        <li>
                            <a href="#" class="icoFacebook" title="Link">
                                <i data-toggle="tooltip" data-placement="top" title="Get a sharable link" class="fa fa-link"></i>
                            </a>
                        </li>
                        <li>
                            <a href="#" class="icoTwitter" title="Twitter" onclick="post_to_twitter()">
                                <i data-toggle="tooltip" data-placement="top" title="Share on Twitter" class="fa fa-twitter"></i>
                            </a>
                        </li>
                        <li>
                            <a href="#" class="icoGoogle" title="E-Mail" onclick="send_email()">
                                <i data-toggle="tooltip" data-placement="top" title="Send by email" class="fa fa-envelope"></i>
                            </a>
                        </li>
                        <li>
                            <a href="#" class="icoGitHub" title="GitHub Gist">
                                <i data-toggle="tooltip" data-placement="top" title="Share as Gist" class="fa fa-github"></i>
                            </a>
                        </li>
                    </ul>
                </div>
            </div>

        </div>
        <div id="account" class="collapse">
            <label for="UserAuthenticationForm">Account</label>
            <form method="POST" class="form-signin animated" id="UserAuthenticationForm" style="text-align: center">
                <input type="email" id="username" name="username" placeholder="Email" required="required" autofocus="autofocus" class="form-control vertical-margin"/>
                <input type="password" name="password" placeholder="Password" required="required" class="form-control vertical-margin"/>
                <button type="submit" class="btn rect-btn purple small-rect" onclick="sidebar_manager.login()">Log in</button>
                <button type="submit" class="btn rect-btn purple-bg small-rect" onclick="sidebar_manager.signup()">Sign up</button>
            </form>
            <form method="POST" class="form-signin collapse animated" id="UserDetails">
                <div style="background: white; border-radius: 3px; color: #555; border-color: #222; padding: 15px;">
                    <label id="user_greeting" class="purple"></label>
                    <button type="submit" style="background: transparent; border: 0;" class="pull-right" onclick="sidebar_manager.logout()">Log out</button>
                </div>
                <div class="form-group" style="text-align: center; margin-top: 10px">
                    <button type="button" class="btn rect-btn purple-bg small-rect" onclick="sidebar_manager.save_model_to_server()">Save Model</button>
                </div>
            </form>

            <div class="form-group">
                <label for="framework">Export Topology to Framework</label>
                <select id="framework" class="form-control selectpicker">
                    <option data-content="<img src='images/icon-tensorflow.png' style='margin-right:10px'>TensorFlow"
                            value="TensorFlow">TensorFlow
                    </option>
                    <option data-content="<img src='images/icon-caffe.png' style='margin-right:10px'> Caffe" value="Caffe">
                        Caffe
                    </option>
                    <option data-content="<img src='images/icon-theano.png' style='margin-right:10px'> Theano"
                            value="Theano">Theano
                    </option>
                    <option data-content="<img src='images/icon-torch.png' style='margin-right:10px'> Torch" value="Torch">
                        Torch
                    </option>
                    <option data-content="<img src='images/icon-keras.png' style='margin-right:10px'> Keras" value="Keras">
                        Keras
                    </option>
                    <option data-content="<img src='images/icon-pytorch.png' style='margin-right:10px'> PyTorch"
                            value="Keras">PyTorch
                    </option>
                    <option data-content="<img src='images/icon-neuralizer-new.png' style='margin-right:10px'>Neuralizer"
                            value="Neuralizer">Neuralizer
                    </option>
                </select>
            </div>
            <!-- Save Topology to File -->
            <div class="form-group">
                <div style="text-align: center; width: 100%">
                    <a class="btn rect-btn purple small-rect" id="saveTopology" onclick="save_current_state_to_file($('#framework').val())">
                        <i class="fa fa-download" aria-hidden="true"></i> Export
                    </a>
                    <a class="btn rect-btn purple small-rect" id="loadTopology" onclick="document.getElementById('fileInput').click()">
                        <i class="fa fa-upload" aria-hidden="true"></i> Import
                    </a>
                    <input type="file" id="fileInput" class="hidden">
                </div>
            </div>
            <!-- Save Topology Image -->
            <div class="form-group">
                <label for="saveTopology">Save Topology Image</label>
                <div style="text-align: center; width: 100%">
                    <a class="btn rect-btn big-rect purple" id="saveTopologyImage" class="form-control" onclick="save_current_state_as_image()"><i class="fa fa-picture-o" aria-hidden="true"></i> Save </a>
                </div>
            </div>

        </div>
    </div>

    <!-- Canvas -->
    <div class="col-xs-9" id="canvas_container" style="height:100%">
        <div id="canvas_helpers">
        </div>
        <div id="canvas_keys">
        </div>
        <div id="canvas_overlay" class="full-screen">
            <div id="canvas_messages" class="centered">
                <h1>Copied to clipboard</h1>
            </div>
        </div>
        <div class="canvas stretched">
            <canvas id="cnv" width="100%" height="100%"></canvas>
        </div>
        <div id="canvas_explore" class="full-screen">
            <div class="container">
                <div class="row">
                    <div class="col-sm-10 ">
                        <div id="imaginary_container">
                            <div class="input-group stylish-input-group">
                                <input type="text" class="form-control transparent-input" placeholder="Search" >
                                <span class="input-group-addon">
                                    <button type="submit">
                                        <span class="glyphicon glyphicon-search"></span>
                                    </button>
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="grid animated" id="models_container">

            </div>
        </div>
    </div>
</span>

<!-- Welcome Screen -->
<div id="welcome_screen_container" class="full-screen animated centered stretched">
    <div id="welcome_screen" class="centered">
        <div id="welcome_screen_frame" class="stretched">
            <div id="welcome_screen_background" class="stretched">
                <div class="appName" style="padding-top: 3%">
                    <!--<h1 class="title">neuralizer</h1>-->
                    <div class="logo" style="width: 300px; margin: auto">
                        <img src="images/neuralizer-logo-green-slim.png" style="width: 100%; height: 100%">
                    </div>
                    <b class="title-subscript">visual neural network designer</b>
                </div>

                <div id="welcome_screen_content" style="text-align: center; margin-top: 1%">
                    <div id="welcome-carousel" class="carousel slide carousel-fade" data-ride="carousel" style="height: 100%">
                        <!-- Wrapper for slides -->
                        <div class="carousel-inner stretched" role="listbox">
                            <div class="item stretched active">
                                <img class="img-responsive center-block" src="images/welcome-example.png" alt="..." style="max-height: 100%;">
                            </div>
                            <div class="item stretched">
                                <img class="img-responsive center-block" src="images/welcome-frameworks.png" alt="..." style="max-height: 100%;">
                            </div>
                        </div>

                    </div>
                </div>
                <a class="btn rect-btn big-rect white" onclick="sidebar_manager.start()"> Start </a>
                <a class="btn rect-btn big-rect green"> Explore </a>
            </div>
        </div>
    </div>
</div>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.12.2/js/bootstrap-select.min.js" async></script>

<script>
    $(document).ready(function () {
        // Initiate with custom caret icon
        $('select.selectpicker').selectpicker();
        // Initiate tooltip
        $('[data-toggle="tooltip"]').tooltip();

        $("#welcome-carousel").carousel({
            interval : 4000,
            pause: false
        });
    });
</script>
<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-91199634-1', 'auto');
    ga('send', 'pageview');
</script>
</body>
</html>